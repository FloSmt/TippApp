<ion-content class="ion-padding">
  <custom-header title="Registrieren" subTitle="Erstelle einen neuen Account" [showButtonSection]="false"
                 [centerTitle]="true"></custom-header>
  <form [formGroup]="registerForm" class="form-input" (ngSubmit)="onRegister()">
    <custom-input
      [errorMessage]="getErrorMessage('username')"
      data-testid="input-username"
      formControlName="username"
      label="Nutzername"
      autocomplete="username"
      type="text">
    </custom-input>
    <custom-input
      [errorMessage]="getErrorMessage('email')"
      data-testid="input-email"
      formControlName="email"
      label="Email"
      autocomplete="email"
      type="email">
    </custom-input>
    <custom-input
      [errorMessage]="getErrorMessage('password')"
      data-testid="input-password"
      formControlName="password"
      label="Password"
      type="password"
      autocomplete="new-password"
      [enablePasswordToggle]="true"
    >
    </custom-input>
    <custom-input
      [errorMessage]="getErrorMessage('confirmPassword')"
      data-testid="input-confirm-password"
      formControlName="confirmPassword" label="Password wiederholen"
      type="password"
      autocomplete="new-password"
      [enablePasswordToggle]="true">
    </custom-input>
    <ion-button
      type="submit"
      [disabled]="disableRegistration()"
      color="primary"
      data-testid="register-button"
      expand="block"
      id="register-button"
      size="large">
      <ion-label>
        @if (isLoading()) {
          <ion-spinner></ion-spinner>
        } @else {
          Registrieren
        }
      </ion-label>
    </ion-button>
    <div class="link-to-login">
      <ion-button (click)="navigateToLoginPage()" data-testid="switch-to-login-button" fill="clear" size="size">Zur
        Bereits einen Account?
      </ion-button>
    </div>
  </form>
</ion-content>

