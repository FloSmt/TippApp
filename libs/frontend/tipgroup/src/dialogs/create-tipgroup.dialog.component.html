<ion-header>
  <ion-toolbar class="dialog-toolbar">
    <ion-buttons slot="start">
      <ion-button (click)="cancel()" class="close-button">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Tippgruppe erstellen</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" [disabled]="disableCreateButton()" (click)="createTipgroup()">
        <ion-label>
          @if (isLoading()) {
            <ion-spinner name="dots"></ion-spinner>
          } @else {
            Erstellen
          }
        </ion-label>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
  @if (isLoading() || availableLeagues.isLoading()) {
    <div class="loading-container">
      <ion-spinner></ion-spinner>
    </div>
  } @else if (hasAvailableLeaguesError()) {
    <lib-error-card
      title="Fehler"
      message="Beim laden der Wettbewerbe ist ein Fehler aufgetreten. Versuche es später erneut!">
    </lib-error-card>
  } @else {
    <form [formGroup]="createForm">
      <ion-input fill="outline"
                 formControlName="name"
                 label-placement="floating"
                 label="Name der Tippgruppe"
                 type="text">
        <ion-icon name="text-outline" slot="start"></ion-icon>
      </ion-input>

      <ion-select label="Wettbewerb" formControlName="selectedLeague" label-placement="floating"
                  fill="outline"
                  interface="popover">
        <ion-icon name="trophy" slot="start"></ion-icon>
        @for (league of availableLeagues.data(); track league.leagueId) {
          <ion-select-option [value]="league.leagueId">
            {{ league.leagueName }} ({{ league.leagueSeason }})
          </ion-select-option>
        }
      </ion-select>

      <ion-input fill="outline"
                 formControlName="password"
                 label-placement="floating"
                 label="Password"
                 type="password">
        <ion-icon name="shield-checkmark" slot="start"></ion-icon>
        <ion-input-password-toggle slot="end"></ion-input-password-toggle>
      </ion-input>
      <ion-input fill="outline"
                 formControlName="passwordConfirm"
                 label-placement="floating"
                 label="Password wiederholen"
                 type="password">
        <ion-input-password-toggle slot="end"></ion-input-password-toggle>
      </ion-input>
    </form>

    <div class="info-cards">
      <div class="info-card">
        <div>
          <ion-icon name="text-outline"></ion-icon>
        </div>
        <div>
          <h3>Name der Tippgruppe</h3>
          <p>Mit diesem Namen können andere Spieler deine Tippgruppe finden und ihr beitreten. Der Name sollte aus
            diesem
            Grund einzigartig sein</p>
        </div>
      </div>
      <div class="info-card">
        <div>
          <ion-icon name="trophy"></ion-icon>
        </div>
        <div>
          <h3>Wettbewerb</h3>
          <p>Der Wettbewerb bestimmt, welche Spiele automatisch in deine Tippgruppe übernommen werden. Die Spieltage
            können
            später individuell angepasst und mit Spielen aus anderen Wettbewerben erweitert werden.</p>
        </div>
      </div>
      <div class="info-card">
        <div>
          <ion-icon name="shield-checkmark"></ion-icon>
        </div>
        <div>
          <h3>Password</h3>
          <p>Mit diesem Password können andere Spieler deiner Tippgruppe beitreten. Du kannst es später in den
            Einstellungen
            ändern.</p>
        </div>
      </div>
    </div>
  }
</ion-content>
