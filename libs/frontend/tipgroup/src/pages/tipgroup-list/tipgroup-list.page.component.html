<ion-header [translucent]="false" class="page-title" mode="ios">
  <ion-toolbar>
    <h1>Deine Tippgruppen</h1>
    <p class="subtile">WÃ¤hle eine Tippgruppe aus oder erstelle eine neue.</p>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true" class="ion-padding">
  <ion-refresher (ionRefresh)="refreshTipgroups($event)" slot="fixed">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-item-group class="tipgroup-list">
    @if (initialLoading()) {
      <ng-container *ngTemplateOutlet="skweletonTemplate"></ng-container>
    }
    @if (hasError() || availableTipgroups() === null && !isLoading()) {
      <ng-container *ngTemplateOutlet="errorTemplate"></ng-container>
    } @else if (availableTipgroups() && availableTipgroups()!.length === 0) {
      <ng-container *ngTemplateOutlet="emptyListTemplate"></ng-container>
    } @else {
      @for (tipgroup of availableTipgroups(); track tipgroup) {
        <ion-item href="/overview?tipgroup={{ tipgroup.id }}" lines="full">
          <ion-label class="tipgroup-item">
            <div class="information truncate-one-line-text">
              <h2>{{ tipgroup.name }}</h2>
            </div>
            <div class="icon">
              <ion-icon name="chevron-forward-outline"></ion-icon>
            </div>
          </ion-label>
        </ion-item>

      }
    }
  </ion-item-group>
</ion-content>
<ion-footer class="button-container ion-no-border ion-padding">
  <ion-button expand="block" size="large">
    Tippgruppe erstellen
  </ion-button>
  <ion-button expand="block" fill="outline" size="large">
    Tippgruppe beitreten
  </ion-button>
</ion-footer>

<ng-template #skweletonTemplate>
  <div class="skeleton-item skeleton-animation"></div>
  <div class="skeleton-item skeleton-animation"></div>
  <div class="skeleton-item skeleton-animation"></div>
  <div class="skeleton-item skeleton-animation"></div>
</ng-template>

<ng-template #errorTemplate>
  <ion-item>
    <ion-label class="error-card">
      <div class="icon">
        <ion-icon name="close-circle-outline"></ion-icon>
      </div>
      <div class="information">
        <h2>Fehler</h2>
        <p>Beim laden der Tippgruppen ist ein Fehler aufgetreten. Versuche es erneut.</p>
      </div>
    </ion-label>
  </ion-item>
</ng-template>

<ng-template #emptyListTemplate>
  <ion-item>
    <ion-label class="no-tipgroups-card">
      <div class="icon">
        <ion-icon name="ban-outline"></ion-icon>
      </div>
      <div class="information">
        <h2>Keine Tippgruppen gefunden</h2>
        <p>Aktuell hast du keine Tippgruppen. Erstelle eine neue oder tritt einer vorhandenen Tippgruppe bei.</p>
      </div>
    </ion-label>
  </ion-item>
</ng-template>

